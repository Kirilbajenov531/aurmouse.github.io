import random
import time

from flask import Flask, render_template, request

app = Flask(__name__)

captcha = random.randint(10000, 99999)
start_time = None
input_time = None
correct = False

@app.route('/')
def index():
    global captcha
    captcha = random.randint(10000, 99999)
    return render_template('index.html', captcha=captcha)

@app.route('/', methods=['POST'])
def verify():
    global captcha, start_time, input_time, correct
    if request.form['captcha'] == str(captcha):
        input_time = time.time()
        if not start_time:
            start_time = input_time
        correct = True
        return render_template('index.html', success=True, time=input_time - start_time)
    else:
        captcha = random.randint(10000, 99999)
        start_time = None
        correct = False
        return render_template('index.html', error=True, captcha=captcha)

if __name__ == '__main__':
    app.run()
